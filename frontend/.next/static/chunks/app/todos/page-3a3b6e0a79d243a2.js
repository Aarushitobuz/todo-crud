(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{375:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var o=a(5155),r=a(2115),s=a(5695),l=a(351);function n(e){let{todo:t,onEdit:a,onDelete:r,onToggleComplete:s}=e;return(0,o.jsxs)("li",{className:"flex justify-between items-center p-4 border rounded-md shadow-sm  hover:shadow-md  bg-white dark:bg-gray-800 transition-all",children:[(0,o.jsxs)("div",{className:"flex items-start gap-4",children:[(0,o.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>s(t),className:"mt-1 accent-blue-600"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium ".concat(t.completed?"line-through text-gray-500":"text-gray-900 dark:text-white"),children:t.title}),(0,o.jsx)("p",{className:"text-sm ".concat(t.completed?"line-through text-gray-400":"text-gray-700 dark:text-gray-300"),children:t.description})]})]}),(0,o.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,o.jsx)("button",{onClick:()=>a(t),className:"text-blue-500 hover:text-blue-700",title:"Edit",children:(0,o.jsx)(l.SG1,{size:18})}),(0,o.jsx)("button",{onClick:()=>r(t._id),className:"text-red-500 hover:text-red-700",title:"Delete",children:(0,o.jsx)(l.IXo,{size:18})})]})]})}function c(e){let{todos:t,onEdit:a,onDelete:r,onToggleComplete:s}=e;return t.length?(0,o.jsx)("ul",{className:"space-y-4 mt-6",children:t.map(e=>(0,o.jsx)(n,{todo:e,onEdit:a,onDelete:r,onToggleComplete:s},e._id))}):(0,o.jsx)("p",{className:"text-center text-gray-500 mt-6",children:"No todos yet."})}function i(e){let{title:t,description:a,onTitleChange:r,onDescriptionChange:s,onSubmit:l,editing:n}=e;return(0,o.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,o.jsx)("input",{type:"text",placeholder:"Title",className:"w-full px-4 py-2 border rounded  dark:bg-gray-900 dark:text-white",value:t,onChange:e=>r(e.target.value),required:!0}),(0,o.jsx)("textarea",{placeholder:"Description",className:"w-full px-4 py-2 border rounded dark:bg-gray-900 dark:text-white",value:a,onChange:e=>s(e.target.value),required:!0}),(0,o.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:n?"Update Todo":"Add Todo"})]})}var d=a(5731);let u=async()=>(await d.A.get("/todo/all-todos")).data,h=async e=>(await d.A.post("/todo/todos",e)).data,x=async(e,t)=>(await d.A.put("/todo/todos/".concat(e),t)).data,m=async e=>{await d.A.delete("/todo/todos/".concat(e))};function p(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(""),[n,d]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),y=(0,s.useRouter)(),b=(0,r.useCallback)(async()=>{try{let e=await u();t(e)}catch(e){console.error("Error fetching todos:",e),y.push("/auth/login")}},[y]);(0,r.useEffect)(()=>{b()},[b]);let w=async e=>{e.preventDefault();try{p?(await x(p._id,{title:a,description:n,completed:p.completed}),g(null)):await h({title:a,description:n}),l(""),d(""),b()}catch(e){console.error("Error saving todo:",e)}},j=async e=>{if(window.confirm("Are you sure you want to delete this todo?"))try{await m(e),b()}catch(e){console.error("Error deleting todo:",e)}},f=async e=>{try{await x(e._id,{...e,completed:!e.completed}),b()}catch(e){console.error("Error toggling completion:",e)}};return(0,o.jsxs)("main",{className:"max-w-2xl mx-auto p-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center text-gray-800 dark:text-white",children:"My Todos"}),(0,o.jsx)(i,{title:a,description:n,onTitleChange:l,onDescriptionChange:d,onSubmit:w,editing:!!p}),(0,o.jsx)(c,{todos:e,onEdit:e=>{g(e),l(e.title),d(e.description)},onDelete:j,onToggleComplete:f})]})}},5731:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let o=a(3464).A.create({baseURL:"http://localhost:3001"});o.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e));let r=o},8735:(e,t,a)=>{Promise.resolve().then(a.bind(a,375))}},e=>{var t=t=>e(e.s=t);e.O(0,[844,115,441,684,358],()=>t(8735)),_N_E=e.O()}]);