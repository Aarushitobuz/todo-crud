(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{375:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var o=r(5155),s=r(2115),a=r(5695),l=r(351);function i(e){let{todo:t,onEdit:r,onDelete:s,onToggleComplete:a}=e;return(0,o.jsxs)("li",{className:"flex justify-between items-center p-4 border rounded-md shadow-sm  hover:shadow-md  bg-white dark:bg-gray-800 transition-all",children:[(0,o.jsxs)("div",{className:"flex items-start gap-4",children:[(0,o.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>a(t),className:"mt-1 accent-blue-600"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium ".concat(t.completed?"line-through text-gray-500":"text-gray-900 dark:text-white"),children:t.title}),(0,o.jsx)("p",{className:"text-sm ".concat(t.completed?"line-through text-gray-400":"text-gray-700 dark:text-gray-300"),children:t.description})]})]}),(0,o.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,o.jsx)("button",{onClick:()=>r(t),className:"text-blue-500 hover:text-blue-700",title:"Edit",children:(0,o.jsx)(l.SG1,{size:18})}),(0,o.jsx)("button",{onClick:()=>s(t._id),className:"text-red-500 hover:text-red-700",title:"Delete",children:(0,o.jsx)(l.IXo,{size:18})})]})]})}function n(e){let{todos:t,onEdit:r,onDelete:s,onToggleComplete:a}=e;return t.length?(0,o.jsx)("ul",{className:"space-y-4 mt-6",children:t.map(e=>(0,o.jsx)(i,{todo:e,onEdit:r,onDelete:s,onToggleComplete:a},e._id))}):(0,o.jsx)("p",{className:"text-center text-gray-500 mt-6",children:"No todos yet."})}function c(e){let{title:t,description:r,onTitleChange:s,onDescriptionChange:a,onSubmit:l,editing:i,formErrors:n}=e;return(0,o.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"text",placeholder:"Title",className:"w-full px-4 py-2 border rounded dark:bg-gray-900 dark:text-white ".concat((null==n?void 0:n.title)?"border-red-500":""),value:t,onChange:e=>s(e.target.value)}),(null==n?void 0:n.title)&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.title})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("textarea",{placeholder:"Description",className:"w-full px-4 py-2 border rounded dark:bg-gray-900 dark:text-white ".concat((null==n?void 0:n.description)?"border-red-500":""),value:r,onChange:e=>a(e.target.value)}),(null==n?void 0:n.description)&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.description})]}),(0,o.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:i?"Update Todo":"Add Todo"})]})}var d=r(5731);let u=async()=>(await d.A.get("/todo/all-todos")).data,h=async e=>(await d.A.post("/todo/todos",e)).data,x=async(e,t)=>(await d.A.put("/todo/todos/".concat(e),t)).data,m=async e=>{await d.A.delete("/todo/todos/".concat(e))};function p(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(""),[i,d]=(0,s.useState)(""),[p,g]=(0,s.useState)(null),[y,b]=(0,s.useState)({}),j=(0,a.useRouter)(),w=(0,s.useCallback)(async()=>{try{let e=await u();t(e)}catch(e){console.error("Error fetching todos:",e),j.push("/auth/login")}},[j]);(0,s.useEffect)(()=>{w()},[w]);let f=async e=>{e.preventDefault();let t={};if(r.trim()||(t.title="Title is required"),i.trim()||(t.description="Description is required"),Object.keys(t).length>0)return void b(t);b({});try{p?(await x(p._id,{title:r,description:i,completed:p.completed}),g(null)):await h({title:r,description:i}),l(""),d(""),w()}catch(e){console.error("Error saving todo:",e)}},v=async e=>{if(window.confirm("Are you sure you want to delete this todo?"))try{await m(e),w()}catch(e){console.error("Error deleting todo:",e)}},N=async e=>{try{await x(e._id,{...e,completed:!e.completed}),w()}catch(e){console.error("Error toggling completion:",e)}};return(0,o.jsxs)("main",{className:"max-w-2xl mx-auto p-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center text-gray-800 dark:text-white",children:"My Todos"}),(0,o.jsx)(c,{title:r,description:i,onTitleChange:l,onDescriptionChange:d,onSubmit:f,editing:!!p,formErrors:y}),(0,o.jsx)(n,{todos:e,onEdit:e=>{g(e),l(e.title),d(e.description)},onDelete:v,onToggleComplete:N})]})}},5695:(e,t,r)=>{"use strict";var o=r(8999);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},5731:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let o=r(3464).A.create({baseURL:"http://localhost:3001"});o.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e));let s=o},8735:(e,t,r)=>{Promise.resolve().then(r.bind(r,375))}},e=>{var t=t=>e(e.s=t);e.O(0,[844,673,441,684,358],()=>t(8735)),_N_E=e.O()}]);