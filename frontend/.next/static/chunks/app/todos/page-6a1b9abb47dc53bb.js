(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{375:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var r=o(5155),a=o(2115),s=o(5695),l=o(351);function i(e){let{todo:t,onEdit:o,onDelete:a,onToggleComplete:s}=e;return(0,r.jsxs)("li",{className:"flex justify-between items-center p-4 border rounded-md shadow-sm  hover:shadow-md  bg-white dark:bg-gray-800 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.completed,onChange:()=>s(t),className:"mt-1 accent-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium ".concat(t.completed?"line-through text-gray-500":"text-gray-900 dark:text-white"),children:t.title}),(0,r.jsx)("p",{className:"text-sm ".concat(t.completed?"line-through text-gray-400":"text-gray-700 dark:text-gray-300"),children:t.description})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,r.jsx)("button",{onClick:()=>o(t),className:"text-blue-500 hover:text-blue-700",title:"Edit",children:(0,r.jsx)(l.SG1,{size:18})}),(0,r.jsx)("button",{onClick:()=>a(t._id),className:"text-red-500 hover:text-red-700",title:"Delete",children:(0,r.jsx)(l.IXo,{size:18})})]})]})}function n(e){let{todos:t,onEdit:o,onDelete:a,onToggleComplete:s}=e;return t.length?(0,r.jsx)("ul",{className:"space-y-4 mt-6",children:t.map(e=>(0,r.jsx)(i,{todo:e,onEdit:o,onDelete:a,onToggleComplete:s},e._id))}):(0,r.jsx)("p",{className:"text-center text-gray-500 mt-6",children:"No todos yet."})}function c(e){let{title:t,description:o,onTitleChange:a,onDescriptionChange:s,onSubmit:l,editing:i,formErrors:n}=e;return(0,r.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"text",placeholder:"Title",className:"w-full px-4 py-2 border rounded dark:bg-gray-900 dark:text-white ".concat((null==n?void 0:n.title)?"border-red-500":""),value:t,onChange:e=>a(e.target.value)}),(null==n?void 0:n.title)&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("textarea",{placeholder:"Description",className:"w-full px-4 py-2 border rounded dark:bg-gray-900 dark:text-white ".concat((null==n?void 0:n.description)?"border-red-500":""),value:o,onChange:e=>s(e.target.value)}),(null==n?void 0:n.description)&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n.description})]}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:i?"Update Todo":"Add Todo"})]})}var d=o(5731);let u=async()=>(await d.A.get("/todo/all-todos")).data,h=async e=>(await d.A.post("/todo/todos",e)).data,x=async(e,t)=>(await d.A.put("/todo/todos/".concat(e),t)).data,m=async e=>{await d.A.delete("/todo/todos/".concat(e))};function p(){let[e,t]=(0,a.useState)([]),[o,l]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[p,g]=(0,a.useState)(null),[y,b]=(0,a.useState)({}),j=(0,s.useRouter)(),w=(0,a.useCallback)(async()=>{try{let e=await u();t(e)}catch(e){console.error("Error fetching todos:",e),j.push("/auth/login")}},[j]);(0,a.useEffect)(()=>{w()},[w]);let f=async e=>{e.preventDefault();let t={};if(o.trim()||(t.title="Title is required"),i.trim()||(t.description="Description is required"),Object.keys(t).length>0)return void b(t);b({});try{p?(await x(p._id,{title:o,description:i,completed:p.completed}),g(null)):await h({title:o,description:i}),l(""),d(""),w()}catch(e){console.error("Error saving todo:",e)}},v=async e=>{if(window.confirm("Are you sure you want to delete this todo?"))try{await m(e),w()}catch(e){console.error("Error deleting todo:",e)}},N=async e=>{try{await x(e._id,{...e,completed:!e.completed}),w()}catch(e){console.error("Error toggling completion:",e)}};return(0,r.jsxs)("main",{className:"max-w-2xl mx-auto p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center text-gray-800 dark:text-white",children:"My Todos"}),(0,r.jsx)(c,{title:o,description:i,onTitleChange:l,onDescriptionChange:d,onSubmit:f,editing:!!p,formErrors:y}),(0,r.jsx)(n,{todos:e,onEdit:e=>{g(e),l(e.title),d(e.description)},onDelete:v,onToggleComplete:N})]})}},5731:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});let r=o(3464).A.create({baseURL:"http://localhost:3001"});r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e));let a=r},8735:(e,t,o)=>{Promise.resolve().then(o.bind(o,375))}},e=>{var t=t=>e(e.s=t);e.O(0,[844,115,441,684,358],()=>t(8735)),_N_E=e.O()}]);